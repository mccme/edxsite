<<<<<<< HEAD
<<<<<<< HEAD
<head>
	${css_link("../static/css/search.css")}
	${js_link("../static/js/div_sizing.js")}
</head>

<<<<<<< HEAD
% if debug:
    <p>"${debug}"</p>
=======
% if spelling_correction:
<div class="correction_div">
	<p class="search_correction">
		<span>Did you mean </span>
		<a onclick="correctionLink(event, '${spelling_correction}')">${spelling_correction}</a>
		<span>?</span>
	</p>
</div>
% endif

<div class="filter">
    <p class="filter-title">Organizations</p>
    <ul class="filter-menu">
    % for org in org_histogram.most_common():
        <li class="filter-item" onclick="filterTrigger(this, 'org', false)">
            <span class="filter-option">${org[0].title()}</span> 
            <span class="count">${org[1]}</span>
        </li>
    % endfor
    </ul>

    <p class="filter-title">Courses</p>
    <ul class="filter-menu">
    % for course in course_histogram.most_common():
        <li class="filter-item" onclick="filterTrigger(this, 'course', false)">
            <span class="filter-option">${course[0].title()}</span> 
            <span class="count">${course[1]}</span>
        </li>
    % endfor
    </ul>
</div>

<form id="filter-select" class="auto-submit" action="/search" method="get">
    <input type="hidden" class="parameter" id="selected-org" name="selected_org" value=""></input>
    <input type="hidden" class="parameter" id="selected-course" name="selected_course" value=""></input>
</form>

<div class="search-results">
    % if results == True:
    	% for datum in data:
        	<a href=${datum.data["url"]}>
        		<section class="result">
        			<div class="result_wrapper">
        				<h1 class="result-title">${datum.data['display_name']}</h1>
        				<div class="result-content">
        					<div class="columnate">
        						<img class="thumbnail" src="${datum.data['thumbnail']}" alt="${datum.data['display_name']}">
        					</div>
        					<div class="columnate">
        						<div class="snippet_container">
        							<p  class="results_snippet scaled-text">
        								${datum.data['snippets']}
        							</p>
        						</div>
        					</div>
        				</div>
        			</div>
        		</section>
        	</a>
    	% endfor
    % else:
        <h1 class="result-title no-results">"No results found, please try again"</h1>
    % endif
</div>

% if len(data) > 1:
	<div class="pagination">
		<span class="step-links">
			% if data.number > 1:
				<a onclick="decrementPage()">Prev</a>
			% endif

			<form id="current-page" class="auto-submit" action="/search" method="get">
                <span class="current-page">
				    Page 
                    <input type="number" name="page" value="${ data.number }" onkeydown="searchHandle(event, true)" onchange="changeHandler(this, ${data.paginator.num_pages})"/> 
                    of ${ data.paginator.num_pages }
                </span>
			</form> 

			% if data.number < data.paginator.num_pages:
				<a onclick="incrementPage()">Next</a>
			%endif
		</span>
	</div>
>>>>>>> Added extra javascript for performant and smooth user interaction
% endif

% if spelling_correction:
<div class="correction_div">
	<p class="search_correction">
		<span>Did you mean </span>
		<a onclick="correctionLink(event, '${spelling_correction}')">${spelling_correction}</a>
		<span>?</span>
	</p>
</div>
% endif

<section class="search-results">
	% for datum in data:
	<section class="result">
		<div class="result_wrapper">
			<h1 class="result-title">${datum[0]}</h1>
			<div class="result-content">
				<div class="columnate">
					% if len(datum) >= 3:
						<img class="thumbnail" src="${datum[2]}" alt="${datum[0]}">
					%endif
				</div>
				<div class="columnate">
					<div class="snippet_container">
						<p  class="results_snippet scaled-text">
							${datum[1]}
						</p>
					</div>
				</div>
			</div>
		</div>
	</section>
	% endfor
</section>

% if len(data) > 1:
	<section class="pagination">
		<span class="step-links">
			% if data.number > 1:
				<a onclick="decrementPage()">Prev</a>
			% endif

			<form id="current-page" class="auto-submit" action="/search" method="get">
                <span class="current-page">
				    Page 
                    <input type="number" class="parameter" name="page" value="${ data.number }" onkeydown="searchHandle(event, true)" onchange="changeHandler(this, ${data.paginator.num_pages})"/> 
                    of ${ data.paginator.num_pages }
                </span>
			</form> 

			% if data.number < data.paginator.num_pages:
				<a onclick="incrementPage()">Next</a>
			%endif
		</span>
	</section>
% endif


% if len(data) > 1:
	<section class="pagination">
		<span class="step-links">
			% if data.number > 1:
				<a href="${ prev_page }">Prev</a>
			% endif

			<span class="current">
				Page ${ data.number } of ${ data.paginator.num_pages }
			</span> 

			% if data.number < data.paginator.num_pages:
				<a href="${next_page}">Next</a>
			%endif
		</span>
	</section>
% endif


% if len(data) > 1:
	<section class="pagination">
		<span class="step-links">
			% if data.number > 1:
				<a href="${ prev_page }">Prev</a>
			% endif

			<span class="current">
				Page ${ data.number } of ${ data.paginator.num_pages }
			</span> 

			% if data.number < data.paginator.num_pages:
				<a href="${next_page}">Next</a>
			%endif
		</span>
	</section>
% endif


% if len(data) > 1:
	<section class="pagination">
		<span class="step-links">
			% if data.number > 1:
				<a href="${ prev_page }">Prev</a>
			% endif

			<span class="current">
				Page ${ data.number } of ${ data.paginator.num_pages }
			</span> 

			% if data.number < data.paginator.num_pages:
				<a href="${next_page}">Next</a>
			%endif
		</span>
	</section>
% endif


<%def name="css_link(path, media='')">
	<link rel="stylesheet" type="text/css" href="${path|h}" media="${media}"></link>
</%def>

<%def name="js_link(path)">
	<script type="text/javascript" src="${path|h}"></script>
</%def>
<%def name="js_link(path)">
	<script type="text/javascript" src="${path|h}"></script>
</%def>
=======
<!DOCTYPE html>
<html lang="en">
=======
>>>>>>> Coverted templates to use mako
<head>
	${css_link("../static/css/search.css")}
	${js_link("../static/js/div_sizing.js")}
</head>

% if spelling_correction:
<div class="correction_div">
	<p class="search_correction">
		<span>Did you mean </span>
		<a href="${ search_correction_link }">${spelling_correction }</a>
		<span>?</span>
	</p>
</div>
% endif

<<<<<<< HEAD
% for datum in data:
<section class="result">
	<div class="result_wrapper">
		<h1>${datum[0]}</h1>
		<p class="results_snippet"> 
			${datum[1]}
		</p>
	</div>
<<<<<<< HEAD
	{% endif %}
	<ol>
		{% for datum in data %}
		<li>
			<div>
				<h1>{{ datum.0 }}</h1>
				<!-- </h2>Score:</h2> -->
				<p class="results_snippet"> 
					{{ datum.1|safe }}
				</p>
			</div>
		</li>
		{% endfor %}
	</ol>
</body>
>>>>>>> Search working, basic functionality and styling in place, as well as csrf protection, snippeting, results highlighting, and spell correction
=======
=======
<section class="search-results">
	% for datum in data:
	<section class="result">
		<div class="result_wrapper">
			<h1 class="result-title">${datum[0]}</h1>
			<div class="result-content">
				<div class="columnate">
					% if len(datum) >= 3:
						<img class="thumbnail" src="${datum[2]}" alt="${datum[0]}">
					%endif
				</div>
				<div class="columnate">
					<div class="snippet_container">
						<p  class="results_snippet scaled-text">
							${datum[1]}
						</p>
					</div>
				</div>
			</div>
		</div>
	</section>
	% endfor
>>>>>>> Made prettier, added requirements, and included main edX page
</section>

% if len(data) > 1:
	<section class="pagination">
		<span class="step-links">
			% if data.number > 1:
				<a href="${ prev_page }">Prev</a>
			% endif

			<span class="current">
				Page ${ data.number } of ${ data.paginator.num_pages }
			</span> 

			% if data.number < data.paginator.num_pages:
				<a href="${next_page}">Next</a>
			%endif
		</span>
	</section>
% endif


% if len(data) > 1:
	<section class="pagination">
		<span class="step-links">
			% if data.number > 1:
				<a href="${ prev_page }">Prev</a>
			% endif

			<span class="current">
				Page ${ data.number } of ${ data.paginator.num_pages }
			</span> 

			% if data.number < data.paginator.num_pages:
				<a href="${next_page}">Next</a>
			%endif
		</span>
	</section>
% endif


% if len(data) > 1:
	<section class="pagination">
		<span class="step-links">
			% if data.number > 1:
				<a href="${ prev_page }">Prev</a>
			% endif

			<span class="current">
				Page ${ data.number } of ${ data.paginator.num_pages }
			</span> 

			% if data.number < data.paginator.num_pages:
				<a href="${next_page}">Next</a>
			%endif
		</span>
	</section>
% endif


% if len(data) > 1:
	<section class="pagination">
		<span class="step-links">
			% if data.number > 1:
				<a href="${ prev_page }">Prev</a>
			% endif

			<span class="current">
				Page ${ data.number } of ${ data.paginator.num_pages }
			</span> 

			% if data.number < data.paginator.num_pages:
				<a href="${next_page}">Next</a>
			%endif
		</span>
	</section>
% endif


% if len(data) > 1:
	<section class="pagination">
		<span class="step-links">
			% if data.number > 1:
				<a href="${ prev_page }">Prev</a>
			% endif

			<span class="current">
				Page ${ data.number } of ${ data.paginator.num_pages }
			</span> 

			% if data.number < data.paginator.num_pages:
				<a href="${next_page}">Next</a>
			%endif
		</span>
	</section>
% endif


<%def name="css_link(path, media='')">
	<link rel="stylesheet" type="text/css" href="${path|h}" media="${media}"></link>
</%def>
>>>>>>> Coverted templates to use mako
